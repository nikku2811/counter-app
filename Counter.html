<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Redirect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
</head>
<body>
<script>
  // ---------------------------------------------------------
  // ðŸ”¥ Firebase Configuration
  // ---------------------------------------------------------
  const firebaseConfig = {
    apiKey: "AIzaSyAJvGAw0xD4OP6lUZ4eiIrGpEz0MsIeTMI",
    authDomain: "diksha-4446b.firebaseapp.com",
    databaseURL: "https://diksha-4446b.firebaseio.com",
    projectId: "diksha-4446b",
    storageBucket: "diksha-4446b.appspot.com", // âœ… Correct bucket
    messagingSenderId: "280944945973",
    appId: "1:280944945973:web:07d5368f6da7f0efb5fa7c",
    measurementId: "G-9VX57LPW7R"
  };

  firebase.initializeApp(firebaseConfig);
  const analytics = firebase.analytics();

  // ---------------------------------------------------------
  // ðŸ“± Store URLs
  // ---------------------------------------------------------
  const STORE_URLS = {
    ios: "https://apps.apple.com/in/app/diksha/id1587874277",
    android: "https://play.google.com/store/apps/details?id=in.gov.diksha.app&hl=en_IN",
    web: "https://diksha.gov.in"
  };

  // ---------------------------------------------------------
  // ðŸ§  Device Detection
  // ---------------------------------------------------------
  function detectDevice() {
    const ua = navigator.userAgent || "";
    if (/iPhone|iPad|iPod/i.test(ua)) return "ios";
   // if (/Android/i.test(ua)) return "android";
    return "android";
  }

  // ---------------------------------------------------------
  // ðŸ“Š Track + Redirect
  // ---------------------------------------------------------
  function trackAndRedirect() {
    const device = detectDevice();

    // General event
    analytics.logEvent("qr_scan_redirect", {
      device: device,
      source: "website_qr",
      ts: Date.now()
    });

    // Device-specific event
    analytics.logEvent(`qr_scan_redirect_${device}`, {
      source: "website_qr",
      ts: Date.now()
    });

    // Redirect after short delay
    const REDIRECT_DELAY_MS = 1000;
    setTimeout(() => {
      window.location.replace(STORE_URLS[device]);
    }, REDIRECT_DELAY_MS);
  }

  // ---------------------------------------------------------
  // ðŸŽ¯ Listener: Trigger on DOM ready
  // ---------------------------------------------------------
  document.addEventListener("DOMContentLoaded", trackAndRedirect);
</script>
</body>
</html>




